---
import { sidebar } from '../config.ts';
let subtree = Astro.request.url.pathname.split('/')[1];
---

<nav>
  <ul class="nav-groups">
    {sidebar.map(category => (
      <li>
        <div class="nav-group">
          <h4 class="nav-group-title"><a href={category.link}>{category.text}</a></h4>
          { (category.subtree == undefined || category.subtree == subtree) &&
          <ul>
            {category.children.map(child => (
              <li class="nav-link"><a href={child.link}>{child.text}</a></li>
            ))}
          </ul>
          }
        </div>
      </li>
    ))}
  </ul>
</nav>
